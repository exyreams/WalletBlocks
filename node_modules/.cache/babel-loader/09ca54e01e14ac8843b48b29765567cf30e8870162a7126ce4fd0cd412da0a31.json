{"ast":null,"code":"import _regeneratorRuntime from \"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport EventEmitter from \"eventemitter3\";\nimport { JsonRpcProvider } from \"@walletconnect/jsonrpc-provider\";\nimport { HttpConnection } from \"@walletconnect/jsonrpc-http-connection\";\nimport { getRpcUrl, signingMethods } from \"@walletconnect/utils\";\nimport { SignerConnection } from \"@walletconnect/signer-connection\";\nvar WalletConnectProvider = /*#__PURE__*/function () {\n  function WalletConnectProvider(opts) {\n    _classCallCheck(this, WalletConnectProvider);\n    this.events = new EventEmitter();\n    this.rpc = {\n      infuraId: opts === null || opts === void 0 ? void 0 : opts.infuraId,\n      custom: opts === null || opts === void 0 ? void 0 : opts.rpc\n    };\n    this.signer = new JsonRpcProvider(new SignerConnection(opts));\n    var chainId = this.signer.connection.chainId || (opts === null || opts === void 0 ? void 0 : opts.chainId) || 1;\n    this.http = this.setHttpProvider(chainId);\n    this.registerEventListeners();\n  }\n  _createClass(WalletConnectProvider, [{\n    key: \"connected\",\n    get: function get() {\n      return this.signer.connection.connected;\n    }\n  }, {\n    key: \"connector\",\n    get: function get() {\n      return this.signer.connection.connector;\n    }\n  }, {\n    key: \"accounts\",\n    get: function get() {\n      return this.signer.connection.accounts;\n    }\n  }, {\n    key: \"chainId\",\n    get: function get() {\n      return this.signer.connection.chainId;\n    }\n  }, {\n    key: \"rpcUrl\",\n    get: function get() {\n      var _a;\n      return ((_a = this.http) === null || _a === void 0 ? void 0 : _a.connection).url || \"\";\n    }\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(args) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = args.method;\n              _context.next = _context.t0 === \"eth_requestAccounts\" ? 3 : _context.t0 === \"eth_accounts\" ? 6 : _context.t0 === \"eth_chainId\" ? 7 : 8;\n              break;\n            case 3:\n              _context.next = 5;\n              return this.connect();\n            case 5:\n              return _context.abrupt(\"return\", this.signer.connection.accounts);\n            case 6:\n              return _context.abrupt(\"return\", this.signer.connection.accounts);\n            case 7:\n              return _context.abrupt(\"return\", this.signer.connection.chainId);\n            case 8:\n              return _context.abrupt(\"break\", 9);\n            case 9:\n              if (!signingMethods.includes(args.method)) {\n                _context.next = 11;\n                break;\n              }\n              return _context.abrupt(\"return\", this.signer.request(args));\n            case 11:\n              if (!(typeof this.http === \"undefined\")) {\n                _context.next = 13;\n                break;\n              }\n              throw new Error(\"Cannot request JSON-RPC method (\".concat(args.method, \") without provided rpc url\"));\n            case 13:\n              return _context.abrupt(\"return\", this.http.request(args));\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function request(_x) {\n        return _request.apply(this, arguments);\n      }\n      return request;\n    }()\n  }, {\n    key: \"sendAsync\",\n    value: function sendAsync(args, callback) {\n      this.request(args).then(function (response) {\n        return callback(null, response);\n      }).catch(function (error) {\n        return callback(error, undefined);\n      });\n    }\n  }, {\n    key: \"enable\",\n    value: function () {\n      var _enable = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var accounts;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.request({\n                method: \"eth_requestAccounts\"\n              });\n            case 2:\n              accounts = _context2.sent;\n              return _context2.abrupt(\"return\", accounts);\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function enable() {\n        return _enable.apply(this, arguments);\n      }\n      return enable;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this.signer.connection.connected) {\n                _context3.next = 3;\n                break;\n              }\n              _context3.next = 3;\n              return this.signer.connect();\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!this.signer.connection.connected) {\n                _context4.next = 3;\n                break;\n              }\n              _context4.next = 3;\n              return this.signer.disconnect();\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n      return disconnect;\n    }()\n  }, {\n    key: \"on\",\n    value: function on(event, listener) {\n      this.events.on(event, listener);\n    }\n  }, {\n    key: \"once\",\n    value: function once(event, listener) {\n      this.events.once(event, listener);\n    }\n  }, {\n    key: \"removeListener\",\n    value: function removeListener(event, listener) {\n      this.events.removeListener(event, listener);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      this.events.off(event, listener);\n    }\n  }, {\n    key: \"isWalletConnect\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"registerEventListeners\",\n    value: function registerEventListeners() {\n      var _this = this;\n      this.signer.connection.on(\"accountsChanged\", function (accounts) {\n        _this.events.emit(\"accountsChanged\", accounts);\n      });\n      this.signer.connection.on(\"chainChanged\", function (chainId) {\n        _this.http = _this.setHttpProvider(chainId);\n        _this.events.emit(\"chainChanged\", chainId);\n      });\n      this.signer.on(\"disconnect\", function () {\n        _this.events.emit(\"disconnect\");\n      });\n    }\n  }, {\n    key: \"setHttpProvider\",\n    value: function setHttpProvider(chainId) {\n      var rpcUrl = getRpcUrl(chainId, this.rpc);\n      if (typeof rpcUrl === \"undefined\") return undefined;\n      var http = new JsonRpcProvider(new HttpConnection(rpcUrl));\n      return http;\n    }\n  }]);\n  return WalletConnectProvider;\n}();\nexport default WalletConnectProvider;","map":{"version":3,"names":["EventEmitter","JsonRpcProvider","HttpConnection","getRpcUrl","signingMethods","SignerConnection","WalletConnectProvider","opts","_classCallCheck","events","rpc","infuraId","custom","signer","chainId","connection","http","setHttpProvider","registerEventListeners","_createClass","key","get","connected","connector","accounts","_a","url","value","_request","_asyncToGenerator","_regeneratorRuntime","mark","_callee","args","wrap","_callee$","_context","prev","next","t0","method","connect","abrupt","includes","request","Error","concat","stop","_x","apply","arguments","sendAsync","callback","then","response","catch","error","undefined","_enable","_callee2","_callee2$","_context2","sent","enable","_connect","_callee3","_callee3$","_context3","_disconnect","_callee4","_callee4$","_context4","disconnect","on","event","listener","once","removeListener","off","_this","emit","rpcUrl"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}