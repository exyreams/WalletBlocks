{"ast":null,"code":"var _regeneratorRuntime = require(\"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"D:/Projects/RainbowKit/connectwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar pify = require('pify');\nvar BaseBlockTracker = require('./base');\nvar sec = 1000;\nvar PollingBlockTracker = /*#__PURE__*/function (_BaseBlockTracker) {\n  \"use strict\";\n\n  _inherits(PollingBlockTracker, _BaseBlockTracker);\n  var _super = _createSuper(PollingBlockTracker);\n  function PollingBlockTracker() {\n    var _this;\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, PollingBlockTracker);\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.');\n    var pollingInterval = opts.pollingInterval || 20 * sec;\n    var retryTimeout = opts.retryTimeout || pollingInterval / 10;\n    var keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true;\n    var setSkipCacheFlag = opts.setSkipCacheFlag || false;\n    // BaseBlockTracker constructor\n    _this = _super.call(this, Object.assign({\n      blockResetDuration: pollingInterval\n    }, opts));\n    // config\n    _this._provider = opts.provider;\n    _this._pollingInterval = pollingInterval;\n    _this._retryTimeout = retryTimeout;\n    _this._keepEventLoopActive = keepEventLoopActive;\n    _this._setSkipCacheFlag = setSkipCacheFlag;\n    return _this;\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  _createClass(PollingBlockTracker, [{\n    key: \"checkForLatestBlock\",\n    value: function () {\n      var _checkForLatestBlock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this._updateLatestBlock();\n            case 2:\n              _context.next = 4;\n              return this.getLatestBlock();\n            case 4:\n              return _context.abrupt(\"return\", _context.sent);\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function checkForLatestBlock() {\n        return _checkForLatestBlock.apply(this, arguments);\n      }\n      return checkForLatestBlock;\n    }() //\n    // private\n    //\n  }, {\n    key: \"_start\",\n    value: function _start() {\n      var _this2 = this;\n      this._performSync().catch(function (err) {\n        return _this2.emit('error', err);\n      });\n    }\n  }, {\n    key: \"_performSync\",\n    value: function () {\n      var _performSync2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var newErr;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!this._isRunning) {\n                _context2.next = 16;\n                break;\n              }\n              _context2.prev = 1;\n              _context2.next = 4;\n              return this._updateLatestBlock();\n            case 4:\n              _context2.next = 6;\n              return timeout(this._pollingInterval, !this._keepEventLoopActive);\n            case 6:\n              _context2.next = 14;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              newErr = new Error(\"PollingBlockTracker - encountered an error while attempting to update latest block:\\n\".concat(_context2.t0.stack));\n              try {\n                this.emit('error', newErr);\n              } catch (emitErr) {\n                console.error(newErr);\n              }\n              _context2.next = 14;\n              return timeout(this._retryTimeout, !this._keepEventLoopActive);\n            case 14:\n              _context2.next = 0;\n              break;\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[1, 8]]);\n      }));\n      function _performSync() {\n        return _performSync2.apply(this, arguments);\n      }\n      return _performSync;\n    }()\n  }, {\n    key: \"_updateLatestBlock\",\n    value: function () {\n      var _updateLatestBlock2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var latestBlock;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return this._fetchLatestBlock();\n            case 2:\n              latestBlock = _context3.sent;\n              this._newPotentialLatest(latestBlock);\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function _updateLatestBlock() {\n        return _updateLatestBlock2.apply(this, arguments);\n      }\n      return _updateLatestBlock;\n    }()\n  }, {\n    key: \"_fetchLatestBlock\",\n    value: function () {\n      var _fetchLatestBlock2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _this3 = this;\n        var req, res;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              req = {\n                jsonrpc: \"2.0\",\n                id: 1,\n                method: 'eth_blockNumber',\n                params: []\n              };\n              if (this._setSkipCacheFlag) req.skipCache = true;\n              _context4.next = 4;\n              return pify(function (cb) {\n                return _this3._provider.sendAsync(req, cb);\n              })();\n            case 4:\n              res = _context4.sent;\n              if (!res.error) {\n                _context4.next = 7;\n                break;\n              }\n              throw new Error(\"PollingBlockTracker - encountered error fetching block:\\n\".concat(res.error));\n            case 7:\n              return _context4.abrupt(\"return\", res.result);\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function _fetchLatestBlock() {\n        return _fetchLatestBlock2.apply(this, arguments);\n      }\n      return _fetchLatestBlock;\n    }()\n  }]);\n  return PollingBlockTracker;\n}(BaseBlockTracker);\nmodule.exports = PollingBlockTracker;\nfunction timeout(duration, unref) {\n  return new Promise(function (resolve) {\n    var timoutRef = setTimeout(resolve, duration);\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref();\n    }\n  });\n}","map":{"version":3,"names":["pify","require","BaseBlockTracker","sec","PollingBlockTracker","_BaseBlockTracker","_inherits","_super","_createSuper","_this","opts","arguments","length","undefined","_classCallCheck","provider","Error","pollingInterval","retryTimeout","keepEventLoopActive","setSkipCacheFlag","call","Object","assign","blockResetDuration","_provider","_pollingInterval","_retryTimeout","_keepEventLoopActive","_setSkipCacheFlag","_createClass","key","value","_checkForLatestBlock","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","_updateLatestBlock","getLatestBlock","abrupt","sent","stop","checkForLatestBlock","apply","_start","_this2","_performSync","catch","err","emit","_performSync2","_callee2","newErr","_callee2$","_context2","_isRunning","timeout","t0","concat","stack","emitErr","console","error","_updateLatestBlock2","_callee3","latestBlock","_callee3$","_context3","_fetchLatestBlock","_newPotentialLatest","_fetchLatestBlock2","_callee4","_this3","req","res","_callee4$","_context4","jsonrpc","id","method","params","skipCache","cb","sendAsync","result","module","exports","duration","unref","Promise","resolve","timoutRef","setTimeout"],"sources":["D:/Projects/RainbowKit/connectwallet/node_modules/eth-block-tracker/src/polling.js"],"sourcesContent":["const pify = require('pify')\nconst BaseBlockTracker = require('./base')\n\nconst sec = 1000\n\nclass PollingBlockTracker extends BaseBlockTracker {\n\n  constructor (opts = {}) {\n    // parse + validate args\n    if (!opts.provider) throw new Error('PollingBlockTracker - no provider specified.')\n    const pollingInterval = opts.pollingInterval || 20 * sec\n    const retryTimeout = opts.retryTimeout || pollingInterval / 10\n    const keepEventLoopActive = opts.keepEventLoopActive !== undefined ? opts.keepEventLoopActive : true\n    const setSkipCacheFlag = opts.setSkipCacheFlag || false\n    // BaseBlockTracker constructor\n    super(Object.assign({\n      blockResetDuration: pollingInterval,\n    }, opts))\n    // config\n    this._provider = opts.provider\n    this._pollingInterval = pollingInterval\n    this._retryTimeout = retryTimeout\n    this._keepEventLoopActive = keepEventLoopActive\n    this._setSkipCacheFlag = setSkipCacheFlag\n  }\n\n  //\n  // public\n  //\n\n  // trigger block polling\n  async checkForLatestBlock () {\n    await this._updateLatestBlock()\n    return await this.getLatestBlock()\n  }\n\n  //\n  // private\n  //\n\n  _start () {\n    this._performSync().catch(err => this.emit('error', err))\n  }\n\n  async _performSync () {\n    while (this._isRunning) {\n      try {\n        await this._updateLatestBlock()\n        await timeout(this._pollingInterval, !this._keepEventLoopActive)\n      } catch (err) {\n        const newErr = new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\\n${err.stack}`)\n        try {\n          this.emit('error', newErr)\n        } catch (emitErr) {\n          console.error(newErr)\n        }\n        await timeout(this._retryTimeout, !this._keepEventLoopActive)\n      }\n    }\n  }\n\n  async _updateLatestBlock () {\n    // fetch + set latest block\n    const latestBlock = await this._fetchLatestBlock()\n    this._newPotentialLatest(latestBlock)\n  }\n\n  async _fetchLatestBlock () {\n    const req = { jsonrpc: \"2.0\", id: 1, method: 'eth_blockNumber', params: [] }\n    if (this._setSkipCacheFlag) req.skipCache = true\n    const res = await pify((cb) => this._provider.sendAsync(req, cb))()\n    if (res.error) throw new Error(`PollingBlockTracker - encountered error fetching block:\\n${res.error}`)\n    return res.result\n  }\n\n}\n\nmodule.exports = PollingBlockTracker\n\nfunction timeout (duration, unref) {\n  return new Promise(resolve => {\n    const timoutRef = setTimeout(resolve, duration)\n    // don't keep process open\n    if (timoutRef.unref && unref) {\n      timoutRef.unref()\n    }\n  })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}